scripted_gui = {
	
	tp_factions_windows = {
	
		window_name = tp_factions_windows
		
		context_type = player_context
		
		parent_window_token = politics_tab
		
		ai_enabled = {
			always = no
		}
		
		effects = {
			tp_factions_windows_click = {
				if = {
					limit = {
						ROOT = { has_country_flag = tp_factions_windows_opened }	
					}
					ROOT = { tp_factions_windows_clean_up = yes }	
				}
				else_if = {
					limit = {
						ROOT = {is_in_faction = no}
					}
				ROOT = { tp_factions_windows_clean_up = yes }
				ROOT = { tp_factions_windows_set_up = yes }
				}
				else_if = {
					limit = {
						NOT = {
							has_country_flag = tp_factions_windows_opened
							has_country_flag = tp_factions_windows_specific_faction_tab_opened
						}
					}
					ROOT = { tp_factions_windows_clean_up = yes }
					tp_factions_windows_set_up_root_page = yes
				}
				
			}
		}
		properties = {
			tp_factions_windows = {
				image = [THIS.GetFactionIcon]
			}
		}
	}
	
}
